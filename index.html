<!DOCTYPE html>
<html>
<head>
	<title>Extract Prayer Times</title>
	<meta http-equiv="Permissions-Policy" content="geolocation 'self'; microphone 'none'; camera 'none';">
	<script>
		window.onload = function() {
			var url = "https://www-source.glitch.me/?url=https%3A%2F%2Fbicmanitoba.ca%2F";
			var xhr = new XMLHttpRequest();
			xhr.open("GET", url);
			xhr.onload = function() {
				if (xhr.status === 200) {
					var html = xhr.responseText;

					// extract the prayer times
					var re = /<th class="prayerName ">(\w+)<\/th><td class="begins ">([\d:]+)<\/td>/g;
					var matches;
					var prayerTimes = "";
					while ((matches = re.exec(html)) !== null) {
						var prayerName = matches[1];
						var prayerTime = matches[2];
						prayerTimes += prayerName + ': ' + prayerTime + "<br>";
					}
					document.body.innerHTML = "<h1>Prayer Times</h1>" + prayerTimes;
				} else {
					console.error(xhr.statusText);
				}
			};
			xhr.onerror = function() {
				console.error(xhr.statusText);
			};
			xhr.send();
		}
	</script>
</head>
<body>
</body>
</html>
